<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>meure ebook</title>

    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/ebook.css"> 
    <script src="./js/ebook.js"></script>
    

  </head>
  <body>
    <div class="ebook__wrapper">
      <div class="ebook__top-box">
        <h2 class="logo">
          <img src="./img/logo.svg" alt="">
        </h2>
        <div class="ebook__top-box-left">
          <ul class="ebook__top-box-btn-list">
            <li>
              <a href="./상품카달로그.pdf" download class="ic_download">
                <img src="./img/ic_download.svg" alt="">
                <span></span>
              </a>
            </li>
            <li>
              <button type="button" class="ic_share" onclick="onShareListModal()">
                <img src="./img/ic_share.svg" alt="">
                <span></span>
              </button>
            </li>
          </ul>
          
        </div>        
        <button type="button" class="ebook__top_control_close"></button>
      </div>      
      <div class="ebook_scroll_box">
        <div class="ebook__scroll">
          <div class="ebook__container" ontouchend="leave()" ontouchstart="set_value()">     
            <div class="cover" style="position:absolute;width:100%;height:100%;left:0;top:0;z-index:10"></div>     
            <ul class="ebook__img-list">
              <li>
                <img src="./img/ebook/ebook_1.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_2.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_3.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_4.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_5.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_6.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_7.jpg" alt="">
              </li>
              <li>
                <img src="./img/ebook/ebook_8.jpg" alt="">
              </li>
            </ul>
          </div>
        </div>
        <div class="ebook__right-floating">
          <div class="ebook__page_control"> 
            <button type="button" class="ebook__bottom_control_page page_1">한장</button>
            <button type="button" class="ebook__bottom_control_page page_2">두장</button>
            <button type="button" class="ebook__bottom_control_page total">
              전체
            </button>
            <button type="button" class="ebook__bottom_control_page basic">일반</button>
          </div>
          <div class="ebook__scale">
            <button type="button" class="ebook__scale-zoom-in"><span class="wid"></span><span class="height"></span></button>
            <button type="button" class="ebook__scale-zoom-out"><span class="wid"></span></button>
          </div>
          
        </div>
        <div class="ebook__control">
          <button type="button" class="ebook__prev on"><span>이전</span></button>
          <button type="button" class="ebook__next on"><span>다음</span></button>
        </div>
      </div>      
      <div class="ebook__bottom-box">
        <div class="ebook__page-move-control">
          <button type="button" class="ebook__page-move-btn prev"></button>
          <div class="ebook__page-txt">
            <span class="cur"></span>/
            <span class="total"></span>
          </div>
          <ul class="ebook__page-move-list"></ul>
          <button type="button" class="ebook__page-move-btn next"></button>
        </div>
        <button type="button" class="ebook__bottom_control_page_list" onclick="onPageListModal()">
          <img src="./img/ic_list.png" alt="">
        </button>
      </div>
      <!-- 페이지목록 팝업 -->
      <div class="com_pop_wrap ebook__page_modal_wrapper">
        <div class="ebook__page_modal">
          <div class="top">
            <span><img src="./img/ic_list_sm.png" alt="">목차</span>
            <button type="button" onclick="closePageListModal()" class="btn_close">
            </button>
          </div>
          <ul class="ebook__page_modal_list">
            <li>
              <img src="./img/ebook/ebook_1.jpg" alt="">
              <span>1. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_2.jpg" alt="">
              <span>2. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_3.jpg" alt="">
              <span>3. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_4.jpg" alt="">
              <span>4. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_5.jpg" alt="">
              <span>5. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_6.jpg" alt="">
              <span>6. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_7.jpg" alt="">
              <span>7. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_8.jpg" alt="">
              <span>8. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_1.jpg" alt="">
              <span>1. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_2.jpg" alt="">
              <span>2. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_3.jpg" alt="">
              <span>3. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_4.jpg" alt="">
              <span>4. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_5.jpg" alt="">
              <span>5. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_6.jpg" alt="">
              <span>6. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_7.jpg" alt="">
              <span>7. 표지</span>
            </li>
            <li>
              <img src="./img/ebook/ebook_8.jpg" alt="">
              <span>8. 표지</span>
            </li>
          </ul>
        </div>
        <div class="bg" onclick="closePageListModal()"></div>
      </div>
      <!-- //페이지목록 팝업 -->
      <!-- 공유 팝업 -->
      <div class="com_pop_wrap ebook__share_wrap">
        <div class="ebook__share_con">
          <div class="top">
            <span>
              <img src="./img/ic_share_top.svg" alt="">
              공유
            </span>
            <button onclick="closeShareListModal()" type="button" class="ebook__top_control_close"></button>
          </div>
          <div class="con_box">
            <ul class="share_list">
              <li>
                <button type="button" onclick="KaKaosendLink('미에르 공식쇼핑몰-meure','https://meure.co.kr/index/_upload/goods/beauty/04_becina_oil_mist/p_04_becina_oil_mist_135ml_shot.jpg','https://meure.co.kr/index/shop.php?cat=00010002&r=view&uid=15&sponsor=','비치나 오일 미스트-BECINA OIL MIST')">
                  <img src="./img/ic_share_kakao.png" alt="">
                </button>
              </li>
              <li>
                <button type="button" onclick="onShare('blog')">
                  <img src="./img/ic_share_blog.png" alt="">
                </button>
              </li>
              <!-- <li>
                <button type="button">
                  <img src="./img/ic_share_insta.png" alt="">
                </button>
              </li> -->
              <li>
                <button type="button" onclick="onShare('face')">
                  <img src="./img/ic_share_face.png" alt="">
                </button>
              </li>
              <li>
                <button type="button" onclick="onShare('twt')">
                  <img src="./img/ic_share_twt.png" alt="">
                </button>
              </li>
            </ul>
            <div class="copy_url">
              <input type="text" readonly value="http://127.0.0.1:5500/ebook.html">
              <button onclick="textCopy('.copy_url input')" type="button" class="btn_copy">주소 복사</button>
            </div>
          </div>
        </div>
        <div onclick="closeShareListModal()" class="bg"></div>
      </div>
      <!-- //공유 팝업 -->
    </div>
  </body>
</html>
<script type="text/javascript" src="//developers.kakao.com/sdk/js/kakao.min.js"></script>

<script>


const ebook = new Ebook('.ebook__wrapper',{
  prev:'.ebook__prev',
  next:'.ebook__next',
  currentPage:'.ebook__page-current',
  breakPoints:{
    768:{
      pageShow:1
    }
  }
})
ebook.init();
const toPage = (num) => {
  ebook.page = num;
  ebook.pageSet();
}
const pageListToggle = () => {
  ebook.pageListToggleOn()
}


let pre_x = 0, pre_y = 0;
function set_value()
{
  pre_x = event.changedTouches[0].clientX;
  pre_y = event.changedTouches[0].clientY;
}

function leave() {
  if(pre_x - event.changedTouches[0].clientX > 20){
    ebook.toNext();
  }
  if(pre_x - event.changedTouches[0].clientX < -20){
    ebook.toPrev();
  }
}



function onZoomRange(e){
  let step = e.value;
  switch(step){
    case '3':
      ebook.imgZoomMax();
      break;
    case '1':
      ebook.imgZoomMin();
      break;
    default :
      ebook.imgZoomDefault();
      break;
  }
}

const shareListModal = document.querySelector('.ebook__share_wrap');
function onShareListModal(){
  shareListModal.classList.add('on');
}
function closeShareListModal(){
  shareListModal.classList.remove('on');
}

function textCopy(div){
  let box = document.querySelector(div);
  box.select();
  document.execCommand('copy');
  alert('주소가 복사되었습니다.')
}

const pageListModal = document.querySelector('.ebook__page_modal_wrapper')
function onPageListModal(){
  pageListModal.classList.add('on');
  const list = pageListModal.querySelectorAll('li');
  list.forEach((el,idx)=>{
    el.addEventListener('click',function(){
      toPage(idx+1);
      closePageListModal();
    })
  })
}

function closePageListModal(){
  const list = pageListModal.querySelectorAll('li');
  pageListModal.classList.remove('on');
}


//공유
function onShare(type) {
  let urlTxt = 'https://meure.co.kr'
  let url = encodeURI(encodeURIComponent(urlTxt));
  let url2 = encodeURIComponent(urlTxt);
  let twtText = '미에르 e-book'
  const title = encodeURI(document.title);
  let shareURL;
  if(type === 'blog'){
    shareURL = "https://share.naver.com/web/shareView?url=" + url + "&title=" + title;
  }
  if(type === 'face'){
    shareURL = "https://www.facebook.com/sharer/sharer.php?u="+url2
  }
  if(type === 'twt'){
    shareURL = "https://twitter.com/intent/tweet?text=" + twtText + "&url=" + urlTxt
  }
  window.open(shareURL)
}
Kakao.init('f225842d8152b618857ba7b3a9b37ffa');
//<![CDATA[
// // 사용할 앱의 JavaScript 키를 설정해 주세요.
// // 카카오링크 버튼을 생성합니다. 처음 한번만 호출하면 됩니다.
function KaKaosendLink(snstitle,snsimg,snsurl,snstxt) {
Kakao.Link.sendDefault({
	objectType: 'feed',
	content: {
	title: snstitle,
	description: snstxt,
	imageUrl: snsimg,
	link: {
		mobileWebUrl: snsurl,
		webUrl: snsurl
	}
	},

	buttons: [
	{
		title: '웹으로 보기',
		link: {
		mobileWebUrl: snsurl,
		webUrl: snsurl
		}
	}
	]
});
}
//]]>


</script>
